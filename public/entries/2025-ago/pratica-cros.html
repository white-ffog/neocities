<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhiteFog 游깨</title>
<link rel="stylesheet" href="/styles/normalize.css">
<link rel="stylesheet" href="/styles/base.css">
<script src="/scripts/init.js"></script>
</head>

<body>

<h1>Pr치tica <em>CORS</em></h1>

<p>
Feita a explica칞칚o te칩rica sobre <a
href="/wiki/technologies/cors.html"><em>CORS</em></a>, irei dar um exemplo
pr치tico. Para isso utilizarei o <em>Node.js</em>, o <em>runtime desktop</em> do
JavaScript, e o framework web <em>Express</em>. Assim, considere os dois c칩digos
abaixo:
</p>
<figure class="w75">
    <figcaption>front.js</figcaption>
    <img src="./images/front-js.png" alt="">
</figure>
<p>
Esse c칩digo cria um servidor web na porta 3001. Ao acessar o diret칩rio raiz,
o servidor retorna um p치gina html. Isso vai representar o <em>front-end</em> da aplica칞칚o.
</p>
<figure class="w75">
    <figcaption>back.js</figcaption>
    <img src="./images/back1-js.png" alt="">
</figure>
<p>
Esse c칩digo cria um servidor web na porta 3000. Ao acessar o diret칩rio raiz,
o servidor retorna um json com a propriedade message igual a 'Hello World'. 
Isso vai representar o <em>back-end</em> da aplica칞칚o.
</p>
<p>
Segue abaixo o c칩digo html da p치gina servida pelo front-end.
</p>
<figure class="w75">
    <figcaption>index.html</figcaption>
    <img src="./images/front-html.png" alt="">
</figure>
<p>
Esse p치gina html mostra o texto 'Hello World' no centro da tela e faz um
requisi칞칚o ao <em>back-end</em> utilizando a <em>FetchAPI</em>. Segue abaixo Uma
visualiza칞칚o dessa p치gina html no navegador.
</p>
<figure class="w75">
    <figcaption>Screenshot Navegador</figcaption>
    <img src="./images/browser1.png" alt="">
</figure>
<p>
Perceba que como n칚o configuramos o cors no <em>back-end</em>, o navegador retorna um
error ao tentar utilizar o <em>FetchAPI</em>.
</p>
<figure class="w75">
    <figcaption>Erro de CORS</figcaption>
    <img src="./images/console-error.png" alt="">
</figure>
<p>
Para resolver isso, irei adicionar um <em>middleware</em>. Um
<em>middleware</em> 칠 um fun칞칚o que irar ser executada antes de qualquer
requisi칞칚o feita ao back-end. No caso desse, seu objetivo vai ser adicionar as
diretivas de <em>CORS</em> permitindo os cabe칞alhos e a origem do meu front-end
(<em>localhost:3001</em>).
</p>
<figure class="w75">
    <figcaption>back.js (ajustado)</figcaption>
    <img src="./images/back2-js.png" alt="">
</figure>
<p>
Agora, reiniciando o <em>back-end</em> e tentando acessar o <em>front-end</em>, o error
de CORS n칚o aparece mais e o retorno do <em>back-end</em> 칠 mostrado.
</p>
<figure class="w75">
    <figcaption>Screenshot Navegador</figcaption>
    <img src="./images/browser2.png" alt="">
</figure>


</body>
</html>